{% extends "basesite/base.html" %} <!-- Looks in every "templates" folder for "base.html" file in "basesite folder" -->

{% block content %}

          <h1> i need to put this here so the next line works </h1>
          <h1> Search using this horribly designed button </h1>
          <input type='text' id='carNAME'></input>
          <button>Search</button>
          <!-- below p tag is where the results are shown -->
          <div class="col-lg-8 col-md-10 mx-auto" id="object">

          </div>

          <!-- function to post input of text box to api endpoint and log results -->
          <script>

          // single result only atm
          $(document).ready(function(){
              $("button").click(function(){
                  $.post("/api/search",
                  {
                    name: $('#carNAME').val()
                  },
                  function(data, status){
                      $("#object").text("");
                      // iterates over all results
                      data.test.forEach(function (item){
                        $("#object").append(template(item));
                      });
                      //$("#object").append(template(data));
                  });
              });
          });

          // returns the templated result, not in a table or anything fancy
          function template(object){
            console.log(object);
            var temp = "";
            temp += "<div id='post-preview'>\n";
            temp += "<a href='/car_details/" + object.id + "/'>";
            temp += "<h3 class='post-title'>" + object.year + " " + object.name + " " + object.model + " " + object.series + "</h3>";
            temp += "</a></div>";
            return temp;
          }
          </script>

</ul>
{% endblock %}
