{% extends "basesite/base.html" %}
{% block content %}
<main role="main" class="container">

<!-- Custom styles for this template -->
<link href="/static/css/landing-page.min.css" rel="stylesheet">
<!-- Custom fonts for this template -->
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
<link href="/static/CSS/main.css" rel="stylesheet">

<!-- Javascript for showing/hiding rental history -->
<script>
function toggleHistory(id){
  $(document).ready(function(){
      // Toggle rental history div
      $(id).toggle(10);
      // Toggle button text
      $('#history').text(function(i, txt){
        return txt === "Show Rental History" ? "Collapse Rental History" : "Show Rental History";
      })
  });
};
</script>

<!-- Title-->
<div>
<br>
<br>
<center> <h2 class="display-2" face="Helvetica" >
    {{ customer.name|title }}</h2> </center>
<br>

<!-- Customer Information Table-->
<table class="table table-striped">
    <tbody>
        <tr>
            <td>Name</td>
            <td>{{ customer.name|capfirst }}</td>
        </tr>
            <td>Phone</td>
            <td>{{ customer.phone|capfirst }}</td>
        </tr>
            <td>Address</td>
            <td>{{ customer.address|capfirst}}</td>
        </tr>
            <td>Birthday</td>
            <td>{{ customer.birthday }}</td>
        </tr>
            <td>Occupation</td>
            <td>{{ customer.occupation|capfirst }}</td>
        </tr>
            <td>Gender</td>
            {% if customer.gender == "M" %}
            <td>Male</td>
            {% elif customer.gender == "F" %}
            <td>Female</td>
            {% endif %}
        </tr>
    </tbody>
</table>

<!-- Rental History of customer -->
{% if user.is_authenticated %}
<center>
<button class="btn btn-outline-secondary" type="button" id='history' onclick='toggleHistory("#rentalHistory")'>Show Rental History</button>
</center>
<!-- Div class to make section collapse by default. Click button to show -->
  <div id="rentalHistory" class="accordion-body collapse">
    <center><h2 class="display-2" face="Helvetica">Rental History</h2></center>
    <table class="table table-striped">
        <tbody>
            {% for order in history %}
            <tr>
                <td><a href="http://localhost:8000/car_details/{{ order.carID.id }}">{{order.carID.year}} {{order.carID.name}} {{order.carID.model}}</a></td>
                <td>Pick up from {{order.pickup_store.name}} on {{order.pickup_date}}</td>
                <td>Dropped off at {{order.return_store.name}} on {{order.return_date}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
  </div>
</div>
{% endif %}

<!-- Disclaimer Footer -->
<footer class="footer bg-light">
  <div class="text-center">
    <p class="text-muted small mb-4 mb-lg-0">&copy; Car Rental Company 2018. All Rights Reserved.</p>
  </div>
</footer>

{% endblock %}
